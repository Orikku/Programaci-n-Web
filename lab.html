<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Laboratorio de XSS - Solo HTML y JavaScript</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="css/lab.css" />
  </head>
  <body>
    <!--#region navigation -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
      <div class="container-fluid m-auto" style="max-width: 1300px">
        <a
          href="index.html"
          class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none"
        >
          <i class="bi bi-filetype-js me-2" style="font-size: 2rem"></i>
          <span class="fw-bold">XSS Analytic</span>
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#navbar-collapse"
          aria-controls="navbar-collapse"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          id="navbar-collapse"
          class="offcanvas offcanvas-end"
          tabindex="-1"
          aria-labelledby="navbar-label"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="navbar-label">XSS Analytic</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>

          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a href="./index.html" class="nav-link">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="d-lg-none bi bi-house"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"
                    />
                  </svg>
                  <span>Inicio</span>
                </a>
              </li>

              <li class="nav-item">
                <a href="./lab.html" class="nav-link active" aria-current="page">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="d-lg-none bi bi-speedometer2"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4M3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707M2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10m9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5m.754-4.246a.39.39 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.39.39 0 0 0-.029-.518z"
                    />
                    <path
                      fill-rule="evenodd"
                      d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A8 8 0 0 1 0 10m8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3"
                    />
                  </svg>
                  <span>Laboratorios</span>
                </a>
              </li>

              <li class="nav-item">
                <a href="./ana.html" class="nav-link">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="d-lg-none bi bi-table"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z"
                    />
                  </svg>
                  <span>Analítica</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
    <!--#endregion-->

    <h1>Vulnerabilidad</h1>

    <div class="container my-5">
      <div class="row">
        <!-- Columna de la "máquina virtual" a la izquierda -->
        <div class="col-md-6">
          <div class="vm-container">
            <div class="vm-title-bar">
              <span>Laboratorio de Cross-Site Scripting (XSS)</span>
              <div class="vm-buttons">
                <div class="vm-button"></div>
                <div class="vm-button"></div>
                <div class="vm-button"></div>
              </div>
            </div>
            <div class="vm-content">
              <p>Ingresa un comentario:</p>
              <input
                type="text"
                id="comentario"
                placeholder="Escribe tu comentario"
                class="form-control mb-2"
              />
              <button onclick="agregarComentario()" class="btn btn-warning w-100">Enviar</button>
              <div id="comentarios">
                <h2>Comentarios:</h2>
              </div>
            </div>
          </div>
        </div>

        <!-- Columna de código de ejemplo a la derecha -->
        <div class="col-md-6">
          <div class="code-example">
            <pre><code>function agregarComentario() {
                    // Obtenemos el comentario ingresado por el usuario
                    var comentario = document.getElementById("comentario").value;
                    
                    // Creamos un nuevo elemento <p> para mostrar el comentario
                    var p = document.createElement("p");
                
                    // Aquí agregamos el comentario directamente sin sanitizar, simulando la vulnerabilidad XSS
                    p.innerHTML = comentario;
                    
                    // Agregamos el comentario al div de comentarios
                    document.getElementById("comentarios").appendChild(p);
                
                    // Limpiamos el campo de entrada
                    document.getElementById("comentario").value = "";
                }
                </code></pre>
          </div>
        </div>
      </div>
    </div>

    <h1>Solucion</h1>

    <div class="container my-5">
      <div class="row">
        <div class="col-md-6">
          <div class="vm-container">
            <div class="vm-title-bar">
              <span>Laboratorio de (XSS) - Buenas Practicas</span>
              <div class="vm-buttons">
                <div class="vm-button"></div>
                <div class="vm-button"></div>
                <div class="vm-button"></div>
              </div>
            </div>
            <div class="vm-content">
              <p>Ingresa un comentario:</p>
              <input
                type="text"
                id="comentario-proteccion"
                placeholder="Escribe tu comentario"
                class="form-control mb-2"
              />
              <button onclick="agregarComentarioProtegido()" class="btn btn-warning w-100">
                Enviar
              </button>
              <div id="comentarios-proteccion">
                <h2>Comentarios:</h2>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="code-example">
            <pre><code>function agregarComentario() {
                    // Obtenemos el comentario ingresado por el usuario
                    var comentario = document.getElementById("comentario").value;
                    
                    // Creamos un nuevo elemento <p> para mostrar el comentario
                    var p = document.createElement("p");
                
                    // Usamos textContent en lugar de innerHTML para evitar XSS
                    p.textContent = comentario;
                    
                    // Agregamos el comentario al div de comentarios
                    document.getElementById("comentarios").appendChild(p);
                
                    // Limpiamos el campo de entrada
                    document.getElementById("comentario").value = "";
                }
                </code></pre>
          </div>
        </div>
      </div>
    </div>
    <footer class="mt-5">
      <div class="container">
        <p>&copy; 2023 XXS Analytic. Todos los derechos reservados.</p>
        <p>
          Síguenos en:
          <a href="#" class="ms-2"><i class="bi bi-facebook"></i></a>
          <a href="#" class="ms-2"><i class="bi bi-twitter"></i></a>
          <a href="#" class="ms-2"><i class="bi bi-instagram"></i></a>
        </p>
        <p>
          <a href="privacy.html">Política de Privacidad</a> |
          <a href="terms.html">Términos y Condiciones</a>
        </p>
      </div>
    </footer>

    <script src="js/lab.js"></script>
    <script src="js/lab-segu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
